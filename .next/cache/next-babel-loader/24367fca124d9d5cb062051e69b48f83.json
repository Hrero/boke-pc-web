{"ast":null,"code":"import _BackTop from \"antd/lib/back-top\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport VisitorList from '../../components/VisitorList';\nimport LeavingMessage from '../../components/LeavingMessage';\nimport PostBody from \"../../components/postBody\";\nimport httpServer from '../../httpServer';\nimport Layout from '../../components/Layout';\nimport Header from '../../components/Header';\nimport InfoThumdsIcon from '../../components/others/InfoThumdsIcon';\nimport { connect } from 'react-redux';\nimport httpAgent from '../../httpAgent';\nimport React from 'React';\nimport { allAgentInfo } from 'zgl-utils-js';\n\nclass Info extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      initialReduxState: this.props.initialReduxState,\n      slug: this.props.slug,\n      com_user_info: this.props.com_user_info,\n      comUserInfo: this.props.comUserInfo\n    };\n  }\n\n  componentDidMount() {\n    const params = {\n      ip: this.state.initialReduxState.user_ip,\n      agent: allAgentInfo()\n    };\n    httpAgent({\n      url: '/user/getUserInfo',\n      method: 'post',\n      params\n    }).then(res => {\n      let userinfo = {};\n\n      if (res.code == 0) {\n        userinfo = res.data;\n      }\n\n      this.state.comUserInfo(userinfo);\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const {\n      com_user_info\n    } = this.state;\n\n    if (JSON.stringify(nextProps.com_user_info) != JSON.stringify(com_user_info)) {\n      this.setState({\n        com_user_info: nextProps.com_user_info\n      });\n    }\n  }\n\n  render() {\n    const {\n      info_Article_Vo,\n      info_message_list,\n      info_view_list,\n      com_label_integer,\n      com_sort_list,\n      html_head_info,\n      au_in_for,\n      user_ip\n    } = this.state.initialReduxState;\n    const com_user_info = this.state.com_user_info;\n    return /*#__PURE__*/_jsxs(Layout, {\n      html_head_info: html_head_info,\n      children: [/*#__PURE__*/_jsx(Header, {\n        com_sort_list: com_sort_list.data,\n        com_label_integer: com_label_integer\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"jsx-2083810217\" + \" \" + \"bodyWrap\",\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: \"jsx-2083810217\" + \" \" + \"homeWrap\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"jsx-2083810217\",\n            children: /*#__PURE__*/_jsx(PostBody, {\n              slug: this.state.slug,\n              content: info_Article_Vo.data.html,\n              au_in_for: au_in_for,\n              user_ip: user_ip,\n              com_user_info: com_user_info\n            })\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"jsx-2083810217\" + \" \" + \"homeRight\",\n            children: [/*#__PURE__*/_jsx(VisitorList, {\n              view_list: info_view_list === null || info_view_list === void 0 ? void 0 : info_view_list.data\n            }), /*#__PURE__*/_jsx(LeavingMessage, {\n              message_list: info_message_list === null || info_message_list === void 0 ? void 0 : info_message_list.data\n            })]\n          })]\n        }), /*#__PURE__*/_jsx(InfoThumdsIcon, {\n          thumdsStatus: info_Article_Vo.data.thumdsStatus,\n          thumdsSum: info_Article_Vo.data.thumdsSum,\n          articleId: info_Article_Vo.data.id,\n          ip: user_ip\n        }), /*#__PURE__*/_jsx(_BackTop, {\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \"jsx-2083810217\",\n            children: /*#__PURE__*/_jsx(\"svg\", {\n              t: \"1609515943321\",\n              viewBox: \"0 0 1024 1024\",\n              version: \"1.1\",\n              xmlns: \"http://www.w3.org/2000/svg\",\n              \"p-id\": \"4562\",\n              width: \"40\",\n              height: \"40\",\n              className: \"jsx-2083810217\" + \" \" + \"icon\",\n              children: /*#__PURE__*/_jsx(\"path\", {\n                d: \"M450 226c37.16-33.787 94.508-31.666 129 5l319 344c8.957 9.352 14 22.087 14 35 0 29.03-23.404 52.012-52 52H733a8 8 0 0 0-8 8v150c0 70.692-57.308 128-128 128H427c-70.692 0-128-57.308-128-128V670a8 8 0 0 0-8-8H164c-13.106 0.012-25.431-4.704-35-13v-1c-21.566-19.037-22.505-51.627-3-73l318-343c1.757-1.842 3.36-3.467 5-5zM840 77c17.47 0 32 14.55 32 33 0 17.45-14.53 32-32 32H185c-18.47 0-33-14.55-33-32 0-18.45 14.53-33 33-33z\",\n                fill: \"#222238\",\n                \"p-id\": \"4563\",\n                className: \"jsx-2083810217\"\n              })\n            })\n          })\n        }), /*#__PURE__*/_jsx(_JSXStyle, {\n          id: \"2083810217\",\n          children: [\".homeRight.jsx-2083810217{width:260px;}\"]\n        })]\n      })]\n    });\n  }\n\n}\n\n;\nexport async function getServerSideProps({\n  params\n}) {\n  const initialReduxState = await httpServer({\n    url: '/api/info',\n    method: 'post',\n    params: {\n      id: params.slug\n    }\n  });\n  return {\n    props: {\n      slug: params.slug,\n      initialReduxState: initialReduxState.data\n    }\n  };\n}\n\nfunction mapStateToProps(state) {\n  const {\n    com_user_info\n  } = state;\n  return {\n    com_user_info\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    comUserInfo(userinfo) {\n      dispatch({\n        type: 'comUserInfo',\n        userinfo\n      });\n    }\n\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Info);","map":null,"metadata":{},"sourceType":"module"}