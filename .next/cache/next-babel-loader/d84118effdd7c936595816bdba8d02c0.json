{"ast":null,"code":"import _Modal from \"antd/lib/modal\";\nimport _Button from \"antd/lib/button\";\nimport _Form from \"antd/lib/form\";\nimport _Input from \"antd/lib/input\";\nimport _notification from \"antd/lib/notification\";\nimport _classCallCheck from \"/Users/app/code/boke-pc-web/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/app/code/boke-pc-web/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Users/app/code/boke-pc-web/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/app/code/boke-pc-web/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/app/code/boke-pc-web/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/app/code/boke-pc-web/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"/Users/app/code/boke-pc-web/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'React';\nimport styles from '../../styles/MessageIcon.module.scss';\nimport { HEAD_PIC } from '../../lib/constants';\nimport { mathFloor, allAgentInfo } from 'zgl-utils-js';\nimport httpAgent from '../../httpAgent';\n\nvar MessageIcon = /*#__PURE__*/function (_React$Component) {\n  _inherits(MessageIcon, _React$Component);\n\n  var _super = _createSuper(MessageIcon);\n\n  function MessageIcon(props) {\n    var _this;\n\n    _classCallCheck(this, MessageIcon);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"layout\", {\n      labelCol: {\n        span: 4\n      },\n      wrapperCol: {\n        span: 20\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"validateMessages\", {\n      required: '${label} is required!',\n      types: {\n        email: '${label} is not a valid email!',\n        number: '${label} is not a valid number!'\n      },\n      number: {\n        range: '${label} must be between ${min} and ${max}'\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"openNotification\", function () {\n      _notification.open({\n        message: '留言成功',\n        description: '您好，我稍后会以邮件回复您',\n        onClick: function onClick() {}\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onFinish\", function (values) {\n      _this.setState({\n        visible: false\n      });\n\n      if (_this.state.name) {\n        values.name = _this.state.name;\n      }\n\n      if (_this.state.email) {\n        values.email = _this.state.email;\n      }\n\n      var params = _objectSpread(_objectSpread({\n        ip: _this.state.ip\n      }, values), {}, {\n        headPicture: HEAD_PIC[mathFloor(5, 0)],\n        agent: allAgentInfo()\n      });\n\n      httpAgent({\n        url: '/message/addMessage',\n        method: 'post',\n        params: params\n      }).then(function (res) {\n        if (res.code === 0) {\n          _this.openNotification();\n        }\n\n        _this.setState({\n          visible: false\n        });\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleZanshangVo\", function () {\n      _this.setState({\n        visible: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleOk\", function () {\n      setTimeout(function () {\n        _this.setState({\n          visible: false\n        });\n      }, 2000);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleCancel\", function () {\n      _this.setState({\n        visible: false\n      });\n    });\n\n    _this.state = {\n      visible: false,\n      thumdsStatus: _this.props.thumdsStatus,\n      thumdsSum: _this.props.thumdsSum,\n      articleId: _this.props.articleId,\n      ip: _this.props.user_ip,\n      name: '',\n      email: '',\n      changeNum: 0\n    };\n    return _this;\n  }\n\n  _createClass(MessageIcon, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var params = {\n        ip: this.state.ip,\n        agent: allAgentInfo()\n      };\n      httpAgent({\n        url: '/user/getUserInfo',\n        method: 'post',\n        params: params\n      }).then(function (res) {\n        if (res.code === 0) {\n          _this2.setState({\n            name: res.data.nickname,\n            email: res.data.email\n          });\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          visible = _this$state.visible,\n          name = _this$state.name,\n          email = _this$state.email;\n      return /*#__PURE__*/_jsx(\"div\", {\n        className: styles._3Pnjry,\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: styles._1pUUKr,\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: styles.svgZan,\n            onClick: this.handleZanshangVo,\n            children: /*#__PURE__*/_jsx(\"i\", {\n              className: styles.anticon,\n              children: /*#__PURE__*/_jsxs(\"svg\", {\n                t: \"1609649450678\",\n                className: \"icon\",\n                viewBox: \"0 0 1024 1024\",\n                version: \"1.1\",\n                xmlns: \"http://www.w3.org/2000/svg\",\n                \"p-id\": \"3673\",\n                width: \"24\",\n                height: \"24\",\n                children: [/*#__PURE__*/_jsx(\"path\", {\n                  d: \"M829.487911 488.777089c-29.217439 1.107217-43.718711 23.069415-43.980677 69.125357-0.424672 74.618465 0.25992 149.247162-0.275269 223.865627-0.418532 58.217936-11.900028 70.305229-70.793346 70.569242-149.243069 0.667196-298.490232 0.629333-447.733301 0.031722-61.683874-0.248663-72.132854-11.446703-72.234161-74.29817-0.287549-178.364317-0.10847-356.731704-0.077771-535.096021 0.001023-9.096169-0.13917-18.23327 0.583285-27.284413 2.218528-27.76946 17.714454-43.033096 45.226041-45.196365 14.479783-1.136893 29.103852-0.544399 43.662429-0.552585 101.923344-0.061398 203.849758 0.443092 305.767985-0.36225 37.81935-0.298805 56.615439-15.948227 57.853639-43.61024 1.286296-28.77844-16.582677-45.778626-54.342676-45.99966-127.396505-0.750083-254.82371-1.537006-382.192585 0.571005-60.902068 1.004887-100.435457 42.084491-106.665345 103.205547-1.654686 16.240893-1.251503 32.718169-1.269923 49.086975-0.105401 92.823082-0.051165 185.647187-0.051165 278.469246 0.029676 0 0.057305 0 0.084934 0 0 101.925391-1.02126 203.859991 0.317225 305.764915 1.111311 84.644819 44.12394 126.740566 129.545448 127.143749 171.081447 0.803295 342.172103 0.818645 513.25355 0.00921 85.549421-0.403183 128.425951-42.699498 129.504516-126.977973 1.11745-87.34737 0.671289-174.72544 0.104377-262.084067C875.478362 509.525646 859.378685 487.645312 829.487911 488.777089z\",\n                  \"p-id\": \"3674\",\n                  fill: \"#bfbfbf\"\n                }), /*#__PURE__*/_jsx(\"path\", {\n                  d: \"M905.789715 134.822638c-17.720593-14.248516-37.137829-14.317077-55.447846-1.790786-10.380418 7.103792-19.064194 16.811898-28.058033 25.799596C662.621463 318.363861 502.968299 477.908554 343.549473 637.684514c-11.455913 11.481496-23.734564 23.405059-31.019481 37.509289-14.547321 28.16855 6.831592 61.061704 48.710398 62.711274 10.386558-7.755638 28.999474-18.48705 43.719734-33.126468C566.282301 544.329313 727.011982 383.287523 887.827621 222.332714c8.986675-8.994861 18.790972-17.699104 25.590841-28.234041C926.537248 173.776835 922.870742 148.557454 905.789715 134.822638z\",\n                  \"p-id\": \"3675\",\n                  fill: \"#bfbfbf\"\n                })]\n              })\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: styles.P63n6G,\n            children: /*#__PURE__*/_jsx(\"div\", {\n              className: styles._2LKTFF,\n              children: /*#__PURE__*/_jsx(\"span\", {\n                className: styles._1GPnWJ,\n                role: \"button\",\n                \"aria-label\": \"\\u67E5\\u770B\\u70B9\\u8D5E\\u5217\\u8868\",\n                children: \"\\u7559\\u8A00\"\n              })\n            })\n          }), /*#__PURE__*/_jsx(_Modal, {\n            visible: visible,\n            onOk: this.handleOk,\n            onCancel: this.handleCancel,\n            footer: null,\n            closable: false,\n            okText: \"\\u786E\\u8BA4\",\n            cancelText: \"\\u53D6\\u6D88\",\n            children: name && email ? /*#__PURE__*/_jsx(\"div\", {\n              className: styles.wrapImg,\n              children: /*#__PURE__*/_jsxs(_Form, _objectSpread(_objectSpread({\n                className: styles.formwrap\n              }, this.layout), {}, {\n                name: \"nest-messages\",\n                onFinish: this.onFinish,\n                validateMessages: this.validateMessages,\n                children: [/*#__PURE__*/_jsx(_Form.Item, {\n                  name: \"name\",\n                  label: \"\\u6635\\u79F0\",\n                  children: /*#__PURE__*/_jsx(_Input, {\n                    disabled: name,\n                    defaultValue: name\n                  })\n                }), /*#__PURE__*/_jsx(_Form.Item, {\n                  name: \"email\",\n                  label: \"\\u90AE\\u7BB1\",\n                  children: /*#__PURE__*/_jsx(_Input, {\n                    disabled: email,\n                    defaultValue: email\n                  })\n                }), /*#__PURE__*/_jsx(_Form.Item, {\n                  name: \"content\",\n                  label: \"\\u5185\\u5BB9\",\n                  children: /*#__PURE__*/_jsx(_Input, {})\n                }), /*#__PURE__*/_jsx(_Form.Item, {\n                  wrapperCol: {\n                    span: 2,\n                    offset: 20\n                  },\n                  children: /*#__PURE__*/_jsx(_Button, {\n                    type: \"primary\",\n                    htmlType: \"submit\",\n                    children: \"\\u63D0\\u4EA4\"\n                  })\n                })]\n              }))\n            }) : /*#__PURE__*/_jsx(\"div\", {\n              className: styles.wrapImg,\n              children: /*#__PURE__*/_jsxs(_Form, _objectSpread(_objectSpread({}, this.layout), {}, {\n                name: \"nest-messages\",\n                onFinish: this.onFinish,\n                validateMessages: this.validateMessages,\n                children: [/*#__PURE__*/_jsx(_Form.Item, {\n                  name: \"name\",\n                  label: \"\\u6635\\u79F0\",\n                  rules: [{\n                    required: true\n                  }],\n                  children: /*#__PURE__*/_jsx(_Input, {\n                    disabled: name,\n                    defaultValue: name\n                  })\n                }), /*#__PURE__*/_jsx(_Form.Item, {\n                  name: \"email\",\n                  label: \"\\u90AE\\u7BB1\",\n                  rules: [{\n                    type: 'email'\n                  }],\n                  children: /*#__PURE__*/_jsx(_Input, {\n                    disabled: email,\n                    defaultValue: email\n                  })\n                }), /*#__PURE__*/_jsx(_Form.Item, {\n                  name: \"content\",\n                  label: \"\\u5185\\u5BB9\",\n                  children: /*#__PURE__*/_jsx(_Input, {})\n                }), /*#__PURE__*/_jsx(_Form.Item, {\n                  wrapperCol: _objectSpread(_objectSpread({}, this.layout.wrapperCol), {}, {\n                    offset: 8\n                  }),\n                  children: /*#__PURE__*/_jsx(_Button, {\n                    type: \"primary\",\n                    htmlType: \"submit\",\n                    children: \"\\u63D0\\u4EA4\"\n                  })\n                })]\n              }))\n            })\n          })]\n        })\n      });\n    }\n  }]);\n\n  return MessageIcon;\n}(React.Component);\n\nexport default MessageIcon;","map":null,"metadata":{},"sourceType":"module"}